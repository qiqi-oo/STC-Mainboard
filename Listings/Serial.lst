C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE SERIAL
OBJECT MODULE PLACED IN .\Objects\Serial.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE App\Serial.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\Serial.lst) TABS(2) OBJECT(.\Objects\Serial.obj)

line level    source

   1          #include <stdio.h>
   2          #include <string.h>
   3          #include  "./User/config.h"
   4          #include  "./User/includes.h"
   5          
   6          #ifdef  STC12C5A60S2  
   7            #define BUF_LENTH 32
   8          #endif
   9          
  10          #ifdef  STC15W4K48S4  
                
                #define BUF_LENTH 520
                
                //#define BUF_LENTH 512
                
                #define OBD_LENTH  (BASEBOARD_SIZE * 2 + 4)  //æœ«å°¾å¢åŠ * num /r/nå…±5ä¸ªå­—ç¬¦
                  
                code  u8 OBDHandbuffer[]="$ZBSJ,";
                
                xdata u8 OBDstrbuffer[OBD_LENTH];
                
                
              #endif
  24          
  25          code  u8 Handbuffer[]={0x55,0xaa,0xfe,0x7c};
  26          
  27          xdata u8 BaseBoardBuffer[BASEBOARD_SIZE];//ä¿å­˜ä¸»æ¿ä¼ è¾“ç»™ä¸Šä½æœºçš„æ•°æ®
  28          
  29          xdata volatile u8 start = FALSE;//å¼€å§‹æŒ‡ä»¤
  30          
  31          
  32          
  33          
  34          xdata u8 Buffer[BUF_LENTH]; //æ¥æ”¶ç¼“å†²
  35          //xdata u8 CMD_Buffer[64];  //æ¥æ”¶ç¼“å†²
  36          
  37          u8 code CMD_RESET[] = "reset";          //å•ç‰‡æœºè½¯å¤ä½æŒ‡ä»¤
  38          
  39          u8 code CMD_start[] = {0x55,0xaa,0x00,0x00,0x11,0x11};//å¼€å§‹é‡‡é›†æŒ‡ä»¤
  40          u8 code CMD_stop[]  = {0x55,0xaa,0x00,0x00,0x00,0x00};//åœæ­¢é‡‡é›†æŒ‡ä»¤
  41          u8 code CMD_writeflash[]  = {0x55,0xaa,0x49,0x4f,0x58,0x47};//å†™flash
  42          u8 code CMD_readflash[]   = {0x55,0xaa,0x49,0x4f,0x44,0x51};//è¯»flash
  43          u8 code CMD_wflash_Ack[]  = {0x58,0x47,0x43,0x47};          //å†™flashåº”ç­”
  44          u8 code CMD_rflash_Ack[]  = {0x44,0x51,0x43,0x47};          //è¯»flashåº”ç­”
  45          
  46          #ifdef  STC15W4K48S4
              u8 code CMD_conf_gpssmobile[] = {0x55,0xAA,0x49,0x4F,0xff,0xff};  //é…ç½®gpsç§»åŠ¨ç«™
              u8 code CMD_conf_gpsbase[]    = {0x55,0xAA,0x49,0x4F,0xff,0xfe};  //é…ç½®GPSåŸºå‡†ç«™
              u8 code CMD_get_gpsbasepos[]  = {0x55,0xAA,0x49,0x4F,0xff,0xfc};  //è·å–GPSåŸºå‡†ç«™åæ ‡
              #endif
  51          
  52          #ifdef  STC15W4K48S4
              //========================================================================
              // å‡½æ•°:void InsertBaseboardDstaUpload(u8 gps_usart,u8 upload_usart)
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 2   

              // æè¿°: æ’å…¥ä¸»æ¿æ•°æ®(vtgè¯­å¥ä¹‹å‰)å¹¶ä¸Šä¼ ï¼Œå¦‚è·å–ä¸åˆ°GPSæ•°æ®ï¼Œè‡ªåŠ¨ä¸Šä¼ å•ä¸»æ¿
             -æ•°æ®
              // å‚æ•°ï¼šu8 gps_usartä¸ºgpsä¸ä¸»æ¿çš„ä¸²å£,u8 upload_usartä¸Šä½æœºä¸ä¸»æ¿çš„ä¸²å·
              // ç‰ˆæœ¬: V1.0, 2022-10-17
              //========================================================================
              static void InsertBaseboardData(u8 gps_usart,u8 upload_usart)
              {
                 static u8 timeout = 0;//è¿ç»­5æ¬¡è¯»å–ä¸åˆ°VTGæ•°æ®ï¼Œè‡ªåŠ¨ä¸Šä¼ å•ä¸»æ¿æ•°æ®
                 xdata u8 *pvtg = NULL;
                 xdata u8 *pOut = (u8 *)Buffer;//æŒ‡å‘æ•°æ®çš„å‡ºå£
                 xdata u16 lenth = 0;
                 xdata u8 cutstr[] ="\n";
                 xdata u8 i = 0;
                 xdata u8 sum=0;  //OBDä¸»æ¿å¼‚æˆ–æ ¡éªŒå’Œ
                 static u8 vtg_flag = 0;//è¿ç»­5æ¬¡è¯»å–ä¸åˆ°VTGæ•°æ®ï¼Œè‡ªåŠ¨ä¸Šä¼ å•ä¸»æ¿æ•°æ®
                
              
              
                if(vtg_flag == 0)//å‡ºç°vtgä¸€æ¬¡åšé‡‡æ ·1æ¬¡
                {
                      vtg_flag = 1;
                    
                      memset(BaseBoardBuffer,0,sizeof(BaseBoardBuffer));  //æ¸…ç©ºä¸»æ¿æ•°æ®ç¼“å­˜
                      GetBaseBoardDataPack(BaseBoardBuffer,sizeof(BaseBoardBuffer));//è·å–ä¸»æ¿æ•°æ®
                
                      memset(OBDstrbuffer,0,sizeof(OBDstrbuffer));  //æ¸…ç©ºä¸»æ¿æ•°æ®ç¼“å­˜
                      HextoStr(BaseBoardBuffer,OBDstrbuffer,sizeof(BaseBoardBuffer));//æ•°æ®è½¬æ¢ 
              
                } 
                if(gps_usart != DISABLE)
                {   
                      memset(Buffer,0,sizeof(Buffer));  //æ¸…ç©ºä¸²å£æ¥æ”¶ç¼“å­˜
                   
                      lenth = BSP_GetFormatRxBuffer(gps_usart,Buffer,sizeof(Buffer)-2,cutstr,strlen(cutstr));//è¯»å–çš„ç¼“å
             -­˜æ•°æ®
              
                      
                      if (lenth > 0)  //ç¼“å­˜ä¸ä¸ºç©º
                      { 
                        timeout = 0;//OBDæ¨¡å¼
                          
                        pvtg = strstr((char *)pOut,"VTG,");//æŸ¥æ‰¾å­—ç¬¦ä¸²
                        
                        while(pvtg != NULL)
                        {
                          if(vtg_flag == 0)//å‡ºç°vtgä¸€æ¬¡åšé‡‡æ ·1æ¬¡
                          {
                                vtg_flag = 1;
                              
                                memset(BaseBoardBuffer,0,sizeof(BaseBoardBuffer));  //æ¸…ç©ºä¸»æ¿æ•°æ®ç¼“å­˜
                                GetBaseBoardDataPack(BaseBoardBuffer,sizeof(BaseBoardBuffer));//è·å–ä¸»æ¿æ•°æ®
                          
                                memset(OBDstrbuffer,0,sizeof(OBDstrbuffer));  //æ¸…ç©ºä¸»æ¿æ•°æ®ç¼“å­˜
                                HextoStr(BaseBoardBuffer,OBDstrbuffer,sizeof(BaseBoardBuffer));//æ•°æ®è½¬æ¢ 
                          } 
                          
                          pvtg = (u8 *)((u8 *)pvtg - 3);//$GPVTGæŸ¥æ‰¾åˆ°VTGåå¾€å‰ç§»åŠ¨3åˆ†å­—ç¬¦ï¼ŒæŒ‡å‘$ç¬¦å·
                      
                          USART_Sendbuffer(upload_usart,(u8 *)pOut,(u16)(pvtg - pOut));//å°†VTGå‰é¢çš„æ•°æ®å…ˆå‘é€å®Œ
              
                          vtg_flag = 0;//æ‰“å¼€ä¸»æ¿é‡‡æ ·
              
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 3   

                          USART_Sendbuffer(upload_usart,OBDHandbuffer,sizeof(OBDHandbuffer)-1);//æ’å…¥ä¸»æ¿å­—å¤´æ•°æ®
              
                          USART_Sendbuffer(upload_usart,OBDstrbuffer,OBD_LENTH-1);//æ’å…¥ä¸»æ¿æ•°æ®
              
                          pOut = pvtg;
              
                          pvtg = pvtg + 6;//è·³è¿‡vtgæŸ¥æ‰¾ä¸‹ä¸€ä¸ª
              
                          pvtg = strstr((char *)pvtg,"VTG,");//æŸ¥æ‰¾å­—ç¬¦ä¸²//æŸ¥æ‰¾ä¸‹ä¸€æ¡æ•°æ®
                          
                          //
                          if(pvtg >= (Buffer + lenth)) break; //æ•°ç»„è¶Šç•Œ
                        }
              
                        USART_Sendbuffer(upload_usart,(u8 *)pOut,(u16)(lenth-(u16)(pOut-Buffer)));    //ä¸Šä¼ å‰©ä½™æ•°æ®
                        
                      }
                      else
                      {
              
                        if(timeout >= 200)
                        { 
                           vtg_flag = 0;//æ‰“å¼€ä¸»æ¿é‡‡æ ·
                          
                          //printf("InsertBaseboardData\r\n");
                          
                          //USART_Sendbuffer(upload_usart,Handbuffer,sizeof(Handbuffer));//å•ä¸»æ¿æ•°æ®äºŒè¿›åˆ¶æ ¼å¼
                          
                          //USART_Sendbuffer(upload_usart,BaseBoardBuffer,sizeof(BaseBoardBuffer));//å•ä¸»æ¿æ•°æ®äºŒè¿›åˆ¶æ
             - ¼å¼
                          
                          USART_Sendbuffer(upload_usart,OBDHandbuffer,sizeof(OBDHandbuffer)-1);//æ’å…¥ä¸»æ¿å­—å¤´æ•°æ®
                          
                          USART_Sendbuffer(upload_usart,OBDstrbuffer,OBD_LENTH-1);//æ’å…¥ä¸»æ¿æ•°æ®
              
                          
                          delay_ms(80);//é—´éš”100æ¯«ç§’
              
                        }
                        else
                        {
                          timeout++;
              //            printf("InsertBaseboardData:timeout!!!  timeout = %b02d\r\n",timeout);
                          delay_ms(5);//é—´éš”100æ¯«ç§’
                        }
                        
                      }
                }
                else 
                { 
                      vtg_flag = 0;//æ‰“å¼€ä¸»æ¿é‡‡æ ·
                      
                      USART_Sendbuffer(upload_usart,Handbuffer,sizeof(Handbuffer));//å•ä¸»æ¿æ•°æ®äºŒè¿›åˆ¶æ ¼å¼
                      
                      USART_Sendbuffer(upload_usart,BaseBoardBuffer,sizeof(BaseBoardBuffer));//å•ä¸»æ¿æ•°æ®äºŒè¿›åˆ¶æ ¼å¼
             -
                      
                      //USART_Sendbuffer(upload_usart,OBDHandbuffer,sizeof(OBDHandbuffer)-1);//å•ä¸»æ¿æ•°æ®å­—ç¬¦ä¸²æ ¼å
             -¼
                      
                      //USART_Sendbuffer(upload_usart,OBDstrbuffer,OBD_LENTH-1);//å•ä¸»æ¿æ•°æ®å­—ç¬¦ä¸²æ ¼å¼  
                      
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 4   

                      delay_ms(100);//é—´éš”100æ¯«ç§’ 
                 }     
              
                  
              }
              #endif
 180          //========================================================================
 181          // å‡½æ•°:void SerialDataUpload(u8 upload_usart)
 182          // æè¿°: ä¸Šä¼ ä¸»æ¿æ•°æ®
 183          // å‚æ•°ï¼šu8 upload_usartä¸ºä¸»æ¿ä¸ä¸Šä½æœºçš„ä¸²å£
 184          // ç‰ˆæœ¬: V1.0, 2022-10-17
 185          //========================================================================
 186          void SerialDataUpload(u8 upload_usart)
 187          {
 188   1      
 189   1        if(start == TURE)
 190   1        {
 191   2            
 192   2            #ifdef  STC12C5A60S2    
 193   2            memset(BaseBoardBuffer,0,sizeof(BaseBoardBuffer));  //æ¸…ç©ºä¸»æ¿æ•°æ®ç¼“å­˜
 194   2            
 195   2            GetBaseBoardDataPack(BaseBoardBuffer,sizeof(BaseBoardBuffer));//è·å–ä¸»æ¿æ•°æ®  
 196   2              
 197   2            USART_Sendbuffer(upload_usart,Handbuffer,sizeof(Handbuffer));//ä¸Šä¼ å•ä¸»æ¿æ•°æ®
 198   2                  
 199   2            USART_Sendbuffer(upload_usart,BaseBoardBuffer,sizeof(BaseBoardBuffer));//ä¸Šä¼ å•ä¸»æ¿æ•°æ®
 200   2            #endif
 201   2      
 202   2            #ifdef  STC15W4K48S4
                    
                    InsertBaseboardData(GPS_USART,upload_usart);//æ’å…¥ä¸»æ¿æ•°æ®ä¸Šä¼     
              
                    #endif
 207   2           
 208   2        }
 209   1      }
 210          #ifdef  STC15W4K48S4  
              
              
              //========================================================================
              // å‡½æ•°:void Serial_TiltSensor_Analy(u8 Tilt_usart,TiltSensorTypeDef *Tilt)
              // æè¿°: è§£æå€¾è§’ä¼ æ„Ÿå™¨æ•°æ®
              // å‚æ•°ï¼šu8 Tilt_usartä¸ºå€¾è§’ä¼ æ„Ÿå™¨ä¸ä¸»æ¿ä¹‹é—´çš„æ¥å£ TiltSensorTypeDef *Tiltä¼ æ„Ÿå™¨æ•°æ®
             -ä¿å­˜çš„å†…å­˜åœ°å€
              // è¿”å›ï¼šè§£æåˆ°æ•°æ®è¿”å›TUREï¼Œå¦åˆ™è¿”å›FALSE
              // ç‰ˆæœ¬: V1.0, 2022-10-17
              //========================================================================
              u8 Serial_TiltSensor_Analy(u8 Tilt_usart,TiltSensorTypeDef *Tilt)
              {
                 
                 xdata u8 *pOut =  NULL;//æŒ‡å‘æ•°æ®çš„å‡ºå£
                 xdata u16 lenth = 0;
                 xdata u8 cutstr[] ={0x55,0x53};
                 xdata u8 ret = FALSE;
                 xdata u8 i = 0;
                 xdata u8 j = 0;
                 xdata u8 sum = 0;
                  
                 memset(Buffer,0,sizeof(Buffer)); //æ¸…ç©ºä¸²å£æ¥æ”¶ç¼“å­˜
                 
                 BSP_ClearUsartRxBuffer(Tilt_usart);//æ¸…é™¤äºŒçº§ç¼“å­˜  
                 
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 5   

                 lenth = BSP_GetFormatRxBuffer(Tilt_usart,Buffer,sizeof(Buffer),cutstr,sizeof(cutstr));//è¯»å–çš„ç¼“å­˜æ
             -•°æ®   
              
                 if(lenth > 0)
                 {
                  pOut = ByteArrayCompar(Buffer,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®    
                 
                  while(pOut != NULL)
                  {
                      //55 53 00 00 01 01 00 00 02 02 00 00 03 03 00 00 00 00 00 00 00 
                      if (TILT_ALL_USART != DISABLE)//æ‰€æœ‰çš„ä¼ æ„Ÿå™¨æ±‡æ€»åç»Ÿä¸€è¾“å‡ºåˆ°ä¸»æ¿  
                      {
                        i= 0;
                        j = 0;
                        while(j<20)
                        {
                            Tilt->RollL = *(pOut + (i+2));      //Xè½´è§’åº¦ä½å­—èŠ‚
                            Tilt->RollH = *(pOut + (i+3));      //Xè½´è§’åº¦é«˜å­—èŠ‚
                            Tilt->PitchL = *(pOut + (i+4));     //Yè½´è§’åº¦ä½å­—èŠ‚
                            Tilt->PitchH = *(pOut + (i+5));     //Yè½´è§’åº¦é«˜å­—èŠ‚
                            Tilt->YawL = *(pOut + (j+14));        //Zè½´è§’åº¦ä½å­—èŠ‚
                            Tilt->YawH = *(pOut + (j+15));        //Zè½´è§’åº¦é«˜å­—èŠ‚         
                            Tilt->Roll  = (int)((Tilt->RollH << 8)  | Tilt->RollL ) /32768.0*1800;      //Xè½´è§’åº¦
                            Tilt->Pitch = (int)((Tilt->PitchH << 8) | Tilt->PitchL) /32768.0*1800;      //Yè½´è§’åº¦
                            Tilt->Yaw   = (int)((Tilt->YawH << 8)   | Tilt->YawL)   /32768.0*1800;      //Zè½´è§’åº¦
              
                            if(Tilt->Roll>127) //è¾¹ç•Œå¤„ç†
                            {
                              Tilt->Roll = 127;
                            }
                            else if(Tilt->Roll < -127) 
                            {
                              Tilt->Roll = -127;
                            }
                            if(Tilt->Pitch>127) //è¾¹ç•Œå¤„ç†
                            {
                              Tilt->Pitch = 127;
                            }
                            else if(Tilt->Pitch < -127) 
                            {
                              Tilt->Pitch = -127;
                            }   
                            if(Tilt->Yaw>127) //è¾¹ç•Œå¤„ç†
                            {
                              Tilt->Yaw = 127;
                            }
                            else if(Tilt->Yaw < -127) 
                            {
                            Tilt->Yaw = -127;
                            }
                          
                            i = i+4;//æŒ‰åè®®ç§»åŠ¨
                            j = j+2;
                            Tilt++;//ç§»åˆ°ä¸‹ä¸€ç»„æ•°æ®
                            
                        } 
                        ret = TURE;
                      }
                      else   //55 53 01 02 02 02 01 01 00 00 00  
                      {
                                    sum = 0;
                          //k++;
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 6   

                          for(i = 0;i<10;i++) //æ±‚æ ¡éªŒå’Œ
                          {
                            sum += *(pOut + i);
                            //printf("%b02X ",*(pOut+i));
                          }
                          //printf("%b02X \r\n",*(pOut+i));
                          //printf("sum = %b02X  k = %b02d \r\n",sum,k);
                          if(sum == *(pOut + 10))//æ ¡éªŒå’Œæˆç«‹
                          { 
                          Tilt->RollL = *(pOut + 2);      //Xè½´è§’åº¦ä½å­—èŠ‚
                          Tilt->RollH = *(pOut + 3);      //Xè½´è§’åº¦é«˜å­—èŠ‚
                          Tilt->PitchL = *(pOut + 4);     //Yè½´è§’åº¦ä½å­—èŠ‚
                          Tilt->PitchH = *(pOut + 5);     //Yè½´è§’åº¦é«˜å­—èŠ‚ 
                          Tilt->YawL = *(pOut + 6);       //Zè½´è§’åº¦ä½å­—èŠ‚
                          Tilt->YawH = *(pOut + 7);       //Zè½´è§’åº¦é«˜å­—èŠ‚
                        
              //            printf("------------------------------------\r\n");
              //            printf("Tilt->RollL = %b02d\r\n", Tilt->RollL);
              //            printf("Tilt->RollH = %b02d\r\n", Tilt->RollH);
              //            printf("Tilt->PitchL = %b02d\r\n",Tilt->PitchL);
              //            printf("Tilt->PitchH = %b02d\r\n",Tilt->PitchH);
              //            printf("Tilt->YawL = %b02d\r\n",  Tilt->YawL);
              //            printf("Tilt->YawH = %b02d\r\n",  Tilt->YawH);
              //            printf("------------------------------------\r\n");
                              
                          Tilt->Roll  = (int)((Tilt->RollH << 8)  | Tilt->RollL ) /32768.0*1800;      //Xè½´è§’åº¦
                          Tilt->Pitch = (int)((Tilt->PitchH << 8) | Tilt->PitchL) /32768.0*1800;      //Yè½´è§’åº¦
                          Tilt->Yaw   = (int)((Tilt->YawH << 8)   | Tilt->YawL)   /32768.0*1800;      //Zè½´è§’åº¦
                        
              //            printf("Tilt->Roll = %h04d\r\n",  Tilt->Roll);
              //            printf("Tilt->Pitch = %h04d\r\n", Tilt->Pitch);
              //            printf("Tilt->Yaw = %h04d\r\n",   Tilt->Yaw);
                            
                          if(Tilt->Roll > 127) //è¾¹ç•Œå¤„ç†
                          {
                            Tilt->Roll = 127;
                          }
                          else if(Tilt->Roll < -127) 
                          {
                            Tilt->Roll = -127;
                          }
              
                          if(Tilt->Pitch > 127) //è¾¹ç•Œå¤„ç†
                          {
                            Tilt->Pitch = 127;
                          }
                          else if(Tilt->Pitch < -127) 
                          {
                            Tilt->Pitch = -127;
                          }   
                          if(Tilt->Yaw > 127) //è¾¹ç•Œå¤„ç†
                          {
                            Tilt->Yaw = 127;
                          }
                          else if(Tilt->Yaw < -127) 
                          {
                            Tilt->Yaw = -127;
                          } 
                          
                           ret = TURE;
                           return ret;  
                        }           
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 7   

                      
                      }
                     pOut = pOut +1;//æŒ‡é’ˆåç§»ï¼Œå–ä¸‹ä¸€ç»„æ•°æ®
                           
                     pOut = ByteArrayCompar(pOut,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®
                           
                  } 
                } 
                 
                return ret; 
              }
              
              //========================================================================
              // å‡½æ•°:HighSensorShock_Analy(u8 bump_usart,FlashParameterTypeDef *pole)
              // æè¿°: æŒ‰ç…§é€šè®¯åè®®è§£æç¢°æ†ä¼ æ„Ÿå™¨ä¼ æ„Ÿå™¨çš„æ•°æ®,å°†è§£æå¥½çš„æ•°æ®ä¿å­˜åˆ°poleæŒ‡
             -å‘çš„å†…å­˜ä¸­
              // å‚æ•°ï¼šUSRATxæ•°æ®é€šè®¯çš„ç«¯å£å·ï¼ŒFlashParameterTypeDef *poleç¢°æ†çš„æ•°æ®ç±»å‹æŒ‡é’ˆ
              // è¿”å›ï¼šè·å–åˆ°ä¸²å£æ•°æ®è¿”å›TUREï¼Œå¦è€…è¿”å›FALSE
              // ç‰ˆæœ¬: V1.0, 2022-10-17
              //========================================================================
              u8 Serial_HighSensorShock_Analy(u8 bump_usart) //é«˜æ£®éœ‡åŠ¨ä¼ æ„Ÿå™¨æ•°æ®è§£æ
              {
                 //$HS-MOTION,15,0000000000.0000100000*03
                 xdata u8 *phand = NULL;//æŒ‡å‘æ•°æ®çš„å‡ºå£
                 xdata u8 *pOut = NULL;//æŒ‡å‘æ•°æ®çš„å‡ºå£
                 xdata u8 *pEnd = NULL;
                 xdata u16 lenth = 0;
                 xdata u8 group_i = 0;//
                 xdata u16 temp = 0;//
                 xdata u8 ret = FALSE;
                 xdata u8 i = 0;
                 xdata u8 cutstr[] ="\n";
              
                 if(bump_usart == DISABLE) return 0;
                
                 memset(Buffer,0,sizeof(Buffer)); //æ¸…ç©ºä¸²å£æ¥æ”¶ç¼“å­˜
              
                 lenth = BSP_GetFormatRxBuffer(bump_usart,Buffer,sizeof(Buffer),cutstr,strlen(cutstr));//è¯»å–çš„ç¼“å­˜æ
             -•°æ®  
                
                  if (lenth > 0)  //ç¼“å­˜ä¸ä¸ºç©º
                  {   
                    //printf("lenth = %h04d\r\n",lenth);
                    //USART_Sendbuffer(USART1,Buffer,lenth);
                    
                    phand = strstr((char *)Buffer,"$HS-MOTION");//æŸ¥æ‰¾å­—ç¬¦ä¸²
                    
                    //printf("phand = %p\r\n",phand);
                    
                    pEnd = strstr((char *)Buffer,cutstr);//æŸ¥æ‰¾ç»“æŸç¬¦å·
                    
                    //printf("pEnd = %p\r\n",pEnd);
                    
                    while((phand != NULL) && (pEnd != NULL))
                    {
                      ret =TURE;//å·²ç»è§£æåˆ°æ•°æ®
                      
                      //printf("BSP_GetFormatRxBuffer lenth = %h04d\r\n",lenth);
                      
                      phand = strstr((char *)phand,",");//æŸ¥æ‰¾é€—å·
                      phand ++ ;
                      phand = strstr((char *)phand,",");//æŸ¥æ‰¾ç¬¬äºŒä¸ªé€—å·
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 8   

                      
                      pOut = (u8 *)(phand +1);  //æŒ‡å‘æ•°æ®
                      
                      //printf("pOut = %p\r\n",pOut);
                      
                      for (group_i = 0; group_i < sizeof(pFlash->bump)/sizeof(pFlash->bump[0]);group_i++)
                      {
                          //printf("group_i = %b02d\r\n",group_i);
                        
                          if(pFlash->bump[group_i].name != 0)         //ç¢°æ†é¡¹ç›®å·²ç»é…ç½®
                          {
                            
                            if( (pOut + pFlash->bump[group_i].count) > pEnd)          //æ•°æ®é•¿åº¦ä¸åˆæ³•ï¼Œé€€å‡º
                            {
              
                              //printf("pOut + pFlash->bump[group_i].count) > pEnd\r\n");
                              break;
                            }   
                            
                            pFlash->bump[group_i].value = 0;//æ¸…é›¶ï¼Œç”¨äºèµ‹å€¼
                            
                            for (i = 0; i< pFlash->bump[group_i].count; i++)//å–è¯¥ç»„çš„ç¢°æ†çŠ¶æ€
                            {
                      
                              temp = (*pOut - '0');         //å–ç¢°æ†çŠ¶æ€
                              
                              if (*pOut == '.')             
                              {
                                pOut++;                     //è·³è¿‡å°æ•°ç‚¹
                                temp = (*pOut - '0');       //å–ç¢°æ†çŠ¶æ€ 
                              } 
                              pOut++;   
                                  
                              temp = temp << i;
                                    
                              pFlash->bump[group_i].value |= temp;//å°†ä¼ æ„Ÿå™¨çš„çŠ¶æ€æŒ‰é¡ºåºå†™å…¥è¿”å›å€¼
                              
                            }
                            //printf("value = %h04d\r\n",pFlash->bump[group_i].value);
                          }
                          else
                            {
                                //printf("pole->bump[group_i].name == 0\r\n");
                                break;//ä¸»æ¿å‚æ•°æœªé…ç½®æˆ–æ²¡æœ‰æŒ‰é¡ºåºé…ç½®è¯¥å‚æ•°ï¼Œè¿”å›ï¼Œä¸åœ¨è§£æè¯¥æ¡æ•°æ
             -®
                            }   
                       }
                      
                      
                       
                      phand = strstr((char *)pOut,"$HS-MOTION");//æŸ¥æ‰¾å­—ç¬¦ä¸²
                       
                      //printf("phand = %p\r\n",phand);
                       
                      pEnd = pEnd + 1;  //è·³è¿‡åˆ‡å‰²çš„ç»“æŸç¬¦
                      pEnd = strstr((char *)pEnd,cutstr);//å†æ¬¡æŸ¥æ‰¾ç»“æŸç¬¦å· 
                       
                      //printf("pEnd = %p\r\n",pEnd);      
                     
                    }
                  }
                  return ret;
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 9   

                  
              }
              
              //========================================================================
              // å‡½æ•°:Serial_Sensor24GShock_Analy(u8 bump_usart,PengganTypeDef *pole)
              // æè¿°: æŒ‰ç…§é€šè®¯åè®®è§£æç¢°æ†ä¼ æ„Ÿå™¨ä¼ æ„Ÿå™¨çš„æ•°æ®,å°†è§£æå¥½çš„æ•°æ®ä¿å­˜åˆ°poleæŒ‡
             -å‘çš„å†…å­˜ä¸­
              // å‚æ•°ï¼šUSRATxæ•°æ®é€šè®¯çš„ç«¯å£å·ï¼ŒPengganTypeDef *poleç¢°æ†çš„æ•°æ®ç±»å‹æŒ‡é’ˆ
              // è¿”å›ï¼šè·å–åˆ°ä¸²å£æ•°æ®è¿”å›TUREï¼Œå¦è€…è¿”å›FALSE
              // ç‰ˆæœ¬: V1.0, 2022-10-17
              //========================================================================
              void Serial_Sensor24GShock_Analy(u8 bump24g_usart,PengganTypeDef *pole) //2.4Géœ‡åŠ¨ä¼ æ„Ÿå™¨æ•°æ®è§£æ
              {
                 xdata u8 *pOut =  NULL;//æŒ‡å‘æ•°æ®çš„å‡ºå£
                 xdata u16 lenth = 0;
                 xdata u8 cutstr[] ={0x53};
              
                 if(bump24g_usart == DISABLE) return;
                 
                 memset(Buffer,0,sizeof(Buffer)); //æ¸…ç©ºä¸²å£æ¥æ”¶ç¼“å­˜
              
                 lenth = BSP_GetFormatRxBuffer(bump24g_usart,Buffer,sizeof(Buffer),cutstr,sizeof(cutstr));//è¯»å–çš„ç¼“å
             -­˜æ•°æ®  
              
                  if (lenth > 0)  //ç¼“å­˜ä¸ä¸ºç©º
                  {   
                    pOut = ByteArrayCompar(Buffer,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®  
                    
                    while(pOut != NULL)
                    {
                     pole->name = *(pOut +2);   //é¡¹ç›®åç§°
                     pole->number = *(pOut +3); //é¡¹ç›®ç¼–å·
                     pole->value = *(pOut +4);  //æ†å·
                      
                     pOut = pOut +1;//æŒ‡é’ˆåç§»ï¼Œå–ä¸‹ä¸€ç»„æ•°æ®
                      
                     pOut = ByteArrayCompar(pOut,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®
                    } 
                  }
                  
              }
              
              
              //========================================================================
              // å‡½æ•°:Serial_csb_dbq_Analy(u8 csb_dbq_usart,PengganTypeDef *pole)
              // æè¿°: æŒ‰ç…§é€šè®¯åè®®è§£æè¶…å£°æ³¢ï¼ˆå•è¾¹æ¡¥ï¼‰ä¼ æ„Ÿå™¨ä¼ æ„Ÿå™¨çš„æ•°æ®,å°†è§£æå¥½çš„æ•°æ
             -®ä¿å­˜åˆ°poleæŒ‡å‘çš„å†…å­˜ä¸­
              // å‚æ•°ï¼šUSRATxæ•°æ®é€šè®¯çš„ç«¯å£å·ï¼ŒPengganTypeDef *poleç¢°æ†çš„æ•°æ®ç±»å‹æŒ‡é’ˆ
              // è¿”å›ï¼šæ— 
              // ç‰ˆæœ¬: V1.0, 2023-5-24
              //========================================================================
              void Serial_csb_dbq_Analy(u8 csb_dbq_usart,CsbTypeDef *csb) //è¶…å£°æ³¢ï¼ˆå•è¾¹æ¡¥ä¼ æ„Ÿå™¨è§£æï¼‰
              {
                 xdata u8 *pOut =  NULL;//æŒ‡å‘æ•°æ®çš„å‡ºå£
                 xdata u16 lenth = 0;
                 xdata u8 cutstr[] ={0xf0};
              
                 if(csb_dbq_usart == DISABLE) return;
                 
                 memset(Buffer,0,sizeof(Buffer)); //æ¸…ç©ºä¸²å£æ¥æ”¶ç¼“å­˜
              
                 lenth = BSP_GetFormatRxBuffer(csb_dbq_usart,Buffer,sizeof(Buffer),cutstr,sizeof(cutstr));//è¯»å–çš„ç¼“å
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 10  

             -­˜æ•°æ®  
              
                  if (lenth > 0)  //ç¼“å­˜ä¸ä¸ºç©º
                  {   
                    pOut = ByteArrayCompar(Buffer,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®  
                    
                    while(pOut != NULL)
                    {
                     if((*(pOut) == 0xf0) && (*(pOut +2) == 0xf1) && (*(pOut +4) == 0xf2) && (*(pOut +6) == 0xf3))
                     {
                      csb->value0 = *(pOut +1);   //é¡¹ç›®åç§°
                      csb->value1 = *(pOut +3);   //é¡¹ç›®åç§°
                      csb->value2 = *(pOut +5);   //é¡¹ç›®åç§°
                      csb->value3 = *(pOut +7);   //é¡¹ç›®åç§°
                     }
                      
                     pOut = pOut +1;//æŒ‡é’ˆåç§»ï¼Œå–ä¸‹ä¸€ç»„æ•°æ®
                      
                     pOut = ByteArrayCompar(pOut,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®
                    } 
                  }
                  
              }
              
              
              
              //========================================================================
              // å‡½æ•°:Serial_csb_sd_Analy(u8 Serial_csb_sd_Analy,CsbTypeDef *csb)
              // æè¿°: æŒ‰ç…§é€šè®¯åè®®è§£æè¶…å£°æ³¢ï¼ˆéš§é“ï¼‰ä¼ æ„Ÿå™¨ä¼ æ„Ÿå™¨çš„æ•°æ®,å°†è§£æå¥½çš„æ•°æ®ä
             -¿å­˜åˆ°csbæŒ‡å‘çš„å†…å­˜ä¸­
              // å‚æ•°ï¼šcsb_sd_usartæ•°æ®é€šè®¯çš„ç«¯å£å·ï¼ŒCsbTypeDef *csbç¢°æ†çš„æ•°æ®ç±»å‹æŒ‡é’ˆ
              // è¿”å›ï¼šæ— 
              // ç‰ˆæœ¬: V1.0, 2023-5-24
              //========================================================================
              void Serial_csb_sd_Analy(u8 csb_sd_usart,CsbTypeDef *csb) //è¶…å£°æ³¢ï¼ˆéš§é“ä¼ æ„Ÿå™¨è§£æï¼‰
              {
                 xdata u8 *pOut =  NULL;//æŒ‡å‘æ•°æ®çš„å‡ºå£
                 xdata u16 lenth = 0;
                 xdata u8 cutstr[] ={0xf0};
              
                 if(csb_sd_usart == DISABLE) return;
                 
                 memset(Buffer,0,sizeof(Buffer)); //æ¸…ç©ºä¸²å£æ¥æ”¶ç¼“å­˜
              
                 lenth = BSP_GetFormatRxBuffer(csb_sd_usart,Buffer,sizeof(Buffer),cutstr,sizeof(cutstr));//è¯»å–çš„ç¼“å­
             -˜æ•°æ®  
              
                  if (lenth > 0)  //ç¼“å­˜ä¸ä¸ºç©º
                  {   
                    pOut = ByteArrayCompar(Buffer,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®  
                    
                    while(pOut != NULL)
                    {
                     if((*(pOut) == 0xf0) && (*(pOut +2) == 0xf1) && (*(pOut +4) == 0xf2) && (*(pOut +6) == 0xf3))
                     {
                      csb->value0 = *(pOut +1);   //é¡¹ç›®åç§°
                      csb->value1 = *(pOut +3);   //é¡¹ç›®åç§°
                      csb->value2 = *(pOut +5);   //é¡¹ç›®åç§°
                      csb->value3 = *(pOut +7);   //é¡¹ç›®åç§°
                     }
                      
                     pOut = pOut +1;//æŒ‡é’ˆåç§»ï¼Œå–ä¸‹ä¸€ç»„æ•°æ®
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 11  

                      
                     pOut = ByteArrayCompar(pOut,lenth,cutstr,sizeof(cutstr));//è·å–å­—å¤´çš„ä½ç½®
                    } 
                  }
              
              }
              
              #endif
 605          //========================================================================
 606          // å‡½æ•°:u8 Serial_Analy(u8 *RxBuffer)
 607          // æè¿°: æŒ‰ç…§é€šè®¯åè®®è§£æä¸²å£æ•°æ®
 608          // å‚æ•°ï¼šUSRATxæ•°æ®é€šè®¯çš„ç«¯å£å·ï¼ŒRxBufferæ•°æ®ç¼“å­˜åŒºæŒ‡é’ˆ,lenthä¸ºæ•°æ®é•¿åº¦
 609          // è¿”å›ï¼šè§£ææˆåŠŸï¼Œè¿”å›TURE.å¤±è´¥è¿”å› FALSE
 610          // ç‰ˆæœ¬: V1.0, 2022-10-17
 611          //========================================================================
 612          u8 Serial_CMD_Analy(u8 USRATx,u8 *RxBuffer,u16 lenth)
 613          {
 614   1        u8 *pfirst = NULL;  
 615   1        xdata u16 flash_addr = 0;
 616   1        xdata u8 flash_value = 0;
 617   1        xdata u16 validlen = 0;
 618   1        
 619   1          //å¤„ç†è‡ªå®šä¹‰å¤ä½å‘½ä»¤reset
 620   1        pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_RESET,strlen(CMD_RESET));//æ¯”è¾ƒæŒ‡ä»¤
 621   1        if (NULL != pfirst) //æ”¶åˆ°å¼€å§‹é‡‡é›†æŒ‡ä»¤
 622   1        {
 623   2          printf("CMD_RESET:IAP_CONTR = 0x60\n");
 624   2          IAP_CONTR = 0x60;  //è½¯ä»¶å¤ä½
 625   2          return  TURE;
 626   2        }
 627   1        
 628   1        //å¤„ç†å¼€å§‹é‡‡é›†æŒ‡ä»¤ 55 AA 00 00 11 11
 629   1        pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_start,sizeof(CMD_start));//æ¯”è¾ƒæŒ‡ä»¤
 630   1        if (NULL != pfirst) //æ”¶åˆ°å¼€å§‹é‡‡é›†æŒ‡ä»¤
 631   1        {
 632   2          
 633   2          if(start == FALSE)
 634   2          {
 635   3            FIRMWARE_VERSION();//æ‰“å°å›ºä»¶ç‰ˆæœ¬å·
 636   3          }
 637   2          Cmd_Start_Callback();
 638   2          start = TURE;
 639   2          return  TURE;
 640   2        }
 641   1      
 642   1        //å¤„ç†åœæ­¢é‡‡é›†æŒ‡ä»¤ 55 AA 00 00 00 00  
 643   1        pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_stop,sizeof(CMD_stop));//æ¯”è¾ƒæŒ‡ä»¤
 644   1        if (NULL != pfirst) //æ”¶åˆ°å¼€å§‹é‡‡é›†æŒ‡ä»¤
 645   1        {
 646   2          start = FALSE;
 647   2          Cmd_Stop_Callback();
 648   2          return  TURE;
 649   2        }
 650   1      
 651   1        //å¤„ç†å†™flashæŒ‡ä»¤ 0x55 0xaa 0x49 0x4f 0x58 0x47
 652   1        pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_writeflash,sizeof(CMD_writeflash));//æ¯”è¾ƒæŒ‡ä»¤
 653   1        
 654   1        if (NULL != pfirst) //æ”¶åˆ°å†™flashæŒ‡ä»¤
 655   1        {
 656   2          start = FALSE;  //åœæ­¢é‡‡é›†
 657   2          Cmd_Stop_Callback();
 658   2          validlen = lenth - (pfirst - RxBuffer);//å­—å¤´æ ¡éªŒæˆåŠŸåï¼Œè®¡ç®—æœ‰æ•ˆæ•°æ®çš„é•¿åº¦ã€‚
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 12  

 659   2          if(validlen < 10) //å†™flashæŒ‡ä»¤æ˜¯10ä¸ªå­—èŠ‚ï¼Œä¸å¤Ÿ10ä¸ªå­—èŠ‚ç»§ç»­æ¥æ”¶
 660   2          {
 661   3            return FALSE;
 662   3          }
 663   2          flash_addr = *(pfirst + 6);
 664   2          flash_addr = flash_addr<<8;
 665   2          flash_addr = flash_addr + *(pfirst + 7);
 666   2      
 667   2          flash_value = *(pfirst + 9);
 668   2      
 669   2          BSP_FlashWriteByte(flash_addr,flash_value);//å†™å…¥flash
 670   2      
 671   2          USART_Sendbuffer(USRATx,CMD_wflash_Ack,sizeof(CMD_wflash_Ack));//åº”ç­”
 672   2      
 673   2          return TURE;
 674   2        }
 675   1        
 676   1        //å¤„ç†è¯»flashæŒ‡ä»¤ 0x55,0xaa,0x49,0x4f,0x44,0x51 
 677   1        pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_readflash,sizeof(CMD_readflash));//æ¯”è¾ƒæŒ‡ä»¤
 678   1        
 679   1        if (NULL != pfirst) //æ”¶åˆ°è¯»flashæŒ‡ä»¤
 680   1        {
 681   2          start = FALSE;//åœæ­¢é‡‡é›†è½¦è¾†ä¿¡å·
 682   2          Cmd_Stop_Callback();
 683   2          validlen = lenth - (pfirst - RxBuffer);//å­—å¤´æ ¡éªŒæˆåŠŸåï¼Œè®¡ç®—æœ‰æ•ˆæ•°æ®çš„é•¿åº¦ã€‚   
 684   2          
 685   2          if(validlen < 10) //å†™flashæŒ‡ä»¤æ˜¯10ä¸ªå­—èŠ‚ï¼Œä¸å¤Ÿ10ä¸ªå­—èŠ‚ç»§ç»­æ¥æ”¶
 686   2          {
 687   3            return FALSE;//ç»§ç»­æ¥æ”¶ä¸²å£æ•°æ®
 688   3          }
 689   2            
 690   2          flash_addr = *(pfirst + 6);
 691   2          flash_addr = flash_addr<<8;
 692   2          flash_addr = flash_addr + *(pfirst + 7);
 693   2          
 694   2          flash_value = IapReadByte(flash_addr);//è¯»å‡ºflash 
 695   2          
 696   2          USART_Sendbuffer(USRATx,CMD_rflash_Ack,sizeof(CMD_rflash_Ack));//åº”ç­”
 697   2          
 698   2          USART_SendData(USRATx,flash_value);//å‘é€è¯»å‡ºæ¥çš„å€¼
 699   2          
 700   2          return TURE;
 701   2        }
 702   1        #ifdef  STC15W4K48S4
                if (GPS_USART != DISABLE)
                {
                    //è¿›å…¥GPSç§»åŠ¨ç«™é…ç½® 0x55 0xAA 0x49 0x4F 0xff 0xff
                    pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_conf_gpssmobile,sizeof(CMD_conf_gpssmobile));//æ¯”è¾ƒæŒ‡ä»¤
                    
                    if (NULL != pfirst) //æ”¶åˆ°GPSç§»åŠ¨ç«™é…ç½®æŒ‡ä»¤
                    {
                      start = FALSE;//åœæ­¢é‡‡é›†è½¦è¾†ä¿¡å·
                      
                      //GPS_EnterConfiguration(MOBILESTATION);//è¿›å…¥GPSåŸºå‡†ç«™é…ç½®
                        
                      return TURE;
                    }
                    
                    //è¿›å…¥GPSåŸºå‡†ç«™é…ç½® 0x55 0xAA 0x49 0x4F 0xff 0xfe
                    pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_conf_gpsbase,sizeof(CMD_conf_gpsbase));//æ¯”è¾ƒæŒ‡ä»¤
                    
                    if (NULL != pfirst) //æ”¶åˆ°GPSç§»åŠ¨ç«™é…ç½®æŒ‡ä»¤
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 13  

                    {
                      start = FALSE;//åœæ­¢é‡‡é›†è½¦è¾†ä¿¡å·
                      
                      //GPS_EnterConfiguration(BASESTATION);//è¿›å…¥GPSåŸºå‡†ç«™é…ç½®
              
                      return TURE;
                    } 
                    
                    //è¯»å–GPSåŸºå‡†ç«™åæ ‡æŒ‡ä»¤0x55 0xAA 0x49 0x4F 0xff 0xfc
                    pfirst = ByteArrayCompar(RxBuffer,lenth,CMD_get_gpsbasepos,sizeof(CMD_get_gpsbasepos));//æ¯”è¾ƒæŒ‡ä»¤
                    
                    if (NULL != pfirst) //æ”¶åˆ°GPSç§»åŠ¨ç«™é…ç½®æŒ‡ä»¤
                    {
                      start = FALSE;//åœæ­¢é‡‡é›†è½¦è¾†ä¿¡å·
                      
                      //GetBaseStationPos();//è·å–åŸºå‡†ç«™åæ ‡
                        
                      return TURE;
                    }   
                }
                #endif
 742   1        return FALSE;
 743   1          
 744   1      }
 745          
 746          
 747          //========================================================================
 748          // å‡½æ•°:void SerialHandle(u8 USARTx)
 749          // æè¿°: ä¸²å£å¤„ç†ç¨‹åº
 750          // å‚æ•°ï¼šUSARTxç«¯å£å·
 751          // ç‰ˆæœ¬: V1.0, 2022-10-17
 752          //========================================================================
 753          void SerialHandle(u8 USARTx)
 754          {
 755   1      
 756   1        xdata u16 lenth = 0;        
 757   1        memset(Buffer,0,sizeof(Buffer));//æ¸…ç†ç¼“å­˜åŒº
 758   1      //#ifdef  STC15W4K48S4  
 759   1      //  if(NETWORK_STATE == 16) return;//ç½‘å£è¢«ç¦ç”¨ï¼Œ16ä¸ºè‡ªå®šä¹‰é˜²æ­¢æ”¹å‚æ•°æ—¶è¯¯æ“ä½œ
 760   1      //#endif
 761   1      #ifdef  STC15W4K48S4      
                if((USARTx == GPS_USART) && (start == TURE)) return;//å¦‚è°ƒè¯•ä¸²å£è¢«GPSå ç”¨ï¼Œä¸”æ”¶åˆ°11æŒ‡ä»¤ è°ƒ
             -è¯•åŠŸèƒ½å¤±æ•ˆï¼Œåªèƒ½ä½¿ç”¨ç½‘å£è¿›è¡Œä¿®æ”¹å‚æ•°
              #endif
 764   1      
 765   1        lenth = BSP_GetUsartRxBuffer(USARTx,Buffer,sizeof(Buffer));//è¯»å–ç¼“å­˜æ•°æ®   
 766   1        if (lenth > 0)
 767   1        {
 768   2          if(Serial_CMD_Analy(USARTx,Buffer,lenth) == TURE)
 769   2          {
 770   3             BSP_ClearUsartRxBuffer(USARTx);  //è§£ææˆåŠŸåæ¸…ç©ºä¸²å£ç¼“å­˜åŒºåŸŸ
 771   3          }
 772   2          
 773   2        } 
 774   1      
 775   1      }
 776          
 777          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    959    ----
C51 COMPILER V9.60.0.0   SERIAL                                                            09/20/2025 15:17:36 PAGE 14  

   CONSTANT SIZE    =     99    ----
   XDATA SIZE       =     93      16
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
